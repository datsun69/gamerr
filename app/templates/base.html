<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gamerr{% endblock %}</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <!-- Main Header & Navigation -->
            <header>
                <h1><a href="{{ url_for('main.index') }}" class="btn btn-purple">Gamerr</a></h1>
                <nav>
                    <!-- The 'request.endpoint' check adds the 'active' class if the condition is true -->
                    <a href="{{ url_for('main.index') }}" class="btn btn-pink {% if request.endpoint == 'main.index' %}btn-gold{% endif %}">Library</a>
                    <a href="{{ url_for('main.add_game_search') }}" class="btn btn-pink {% if request.endpoint == 'main.add_game_search' or request.endpoint == 'main.show_search_results' %}btn-gold{% endif %}">Add Game</a>
                    <a href="{{ url_for('main.activity_page') }}" class="btn btn-pink {% if request.endpoint == 'main.activity_page' %}btn-gold{% endif %}">Activity</a>
                    <a href="{{ url_for('main.settings') }}" class="btn btn-pink {% if request.endpoint == 'main.settings' %}btn-gold{% endif %}">Settings</a>
                </nav>
            </header>

            <!-- Main Content Area -->
            <main>
                <!-- Child templates like index.html will inject their content here -->
                {% block content %}{% endblock %}
            </main>
        </div>

        <footer>
            <div>Gamerr v0.0.8</div>
            <div class="no-margin">
                <a href="https://coff.ee/datsun69" target="_blank">Buy me a beer</a> / <a href="https://github.com/datsun69/gamerr" target="_blank">Github</a>
                
            </div>
        </footer>
    </div>

    <!-- ========================================================== -->
    <!-- TOAST NOTIFICATION CONTAINER (The one and only flash message block) -->
    <!-- ========================================================== -->
    <div class="toast-container">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="toast toast-{{ category }}">
                    <span>{{ message }}</span>
                    <button class="toast-close">&times;</button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    </div>

    <!-- ========================================================== -->
    <!-- JAVASCRIPT SECTION -->
    <!-- ========================================================== -->

    <!-- This script handles the toast dismissal logic. It belongs here because
         any page might need to show a toast. -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const toasts = document.querySelectorAll('.toast');
            toasts.forEach((toast) => {
                // Auto-dismiss after 5 seconds
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 5000);

                // Handle the close button
                const closeButton = toast.querySelector('.toast-close');
                if (closeButton) {
                    closeButton.addEventListener('click', () => {
                        toast.style.display = 'none';
                    });
                }
            });
        });
    </script>
    
    <!-- This is a placeholder block. A specific page like index.html
         can inject its own scripts here. -->
    {% block scripts %}{% endblock %}

</body>
</html>